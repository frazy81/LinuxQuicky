Some hacks assorti
==================

* [DVD rip](dvdrip.md)

Debian installation hack - install in expert mode and chroot into target
------------------------

Install Debian on NVME ePCI using UEFI:
choose Debian Expert Install from "Advanced".
Before GRUB/LILO Install, execute Shell and:

cd /target
mount --rbind /proc proc/
mount --rbind /sys sys/
mount --rbind /dev dev/
mount --rbind /dev/pts dev/pts/
mount --rbind /run run/
chroot . /bin/bash

to enable Networking, you might need to:
rm /target/etc/resolv.conf
nano /target/etc/resolv.conf

put:
nameserver 192.168.1.1

in it and safe.

/etc/resolv.conf is sometimes generated by a Network-Manager and is not active on /target.

if you are about to install a new LINUX. Then make sure /boot is mounted (in case it's not below /)! Otherwise you install the new image in the unmounted /boot directory!

make a Backup before you do this ;-)

apt update
apt install grub-efi grub-pc-bin

update-grub
grub-install /dev/nvme0n1

after that, continue the install.

Debian boot problems
--------------------

If Grub can't boot (UEFI), maybe I tried to install a new system on a USB stick. Take the Debian installation CD, go to rescue menu, then run an update-grub, grub-install /dev/nvme0n1. Try to reboot and test.

EFI is currently somewhat ununderstood by me. If you install a system on a USB stick, information get's written to nvme0n1p1 EFI Partition and may corrupt stuff already there...! I solved this by not automatically install the bootloader, but - in expert mode - go to the shell, make /target your chroot (using the tick I mentioned just before), apt install grub-pc (not efi!) and manually run a install-grub /dev/sd<DRIVE>

Debian boot into older kernel
-----------------------------

nano /etc/default/grub:
GRUB_DEFAULT="gnulinux-advanced-d38b9b82-8e0d-4b77-850b-8ec338e10229>gnulinux-4.19.0-8-amd64-advanced-d38b9b82-8e0d-4b77-850b-8ec338e10229"

the id can be obtained in /boot/grub/grub.cfg

[back](../)

